

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interacting with Multiple Network Devices at the same time &mdash; CiscoAutomationFramework 1.0.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="CiscoAutomationFramework 1.0.4 documentation" href="index.html"/>
        <link rel="next" title="Command Output Parsers" href="parsers.html"/>
        <link rel="prev" title="Interacting with a Network Device" href="interact.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CiscoAutomationFramework
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="connect.html">How To Connect to A Network Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="interact.html">Interacting with a Network Device</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interacting with Multiple Network Devices at the same time</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-scripts">Example Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parsers.html">Command Output Parsers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CiscoAutomationFramework</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Interacting with Multiple Network Devices at the same time</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/concurency.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interacting-with-multiple-network-devices-at-the-same-time">
<h1>Interacting with Multiple Network Devices at the same time<a class="headerlink" href="#interacting-with-multiple-network-devices-at-the-same-time" title="Permalink to this headline">¶</a></h1>
<p>CiscoAutomationFramework provides a way of running the same code on multiple devices
concurrently. It takes into account situations where you will have a mix of IOS and Nexus and
when you dont care, providing object to inherit from and override in both circumstances.</p>
<dl class="class">
<dt id="CiscoAutomationFramework.ThreadLib.SSH">
<em class="property">class </em><code class="descclassname">CiscoAutomationFramework.ThreadLib.</code><code class="descname">SSH</code><span class="sig-paren">(</span><em>ip</em>, <em>username</em>, <em>password</em>, <em>enable_password=None</em>, <em>perform_secondary_action=False</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSH" title="Permalink to this definition">¶</a></dt>
<dd><p>Base SSH object that you can inherit from when building a threaded script that will run across the network.</p>
<p>To build a script you must subclass this object and override the methods that are documented.</p>
<p>Method Execution Order
The object logs into the device
during_login is executed
if perform_secondary_action is set to True secondary_action is executed and then post_secondary_action</p>
<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSH.during_login">
<code class="descname">during_login</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSH.during_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Every time this object runs against a device this method will be run. Override this method and add logic
that needs to be run every time your object runs against a device.</p>
<p>I find I often add logic here that gathers data and does not modify configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSH.post_secondary_action">
<code class="descname">post_secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSH.post_secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True and AFTER secondary_action has completed.</p>
<p>I often find this is useful for containing logic that re gathers data or saves configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSH.secondary_action">
<code class="descname">secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSH.secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True.</p>
<p>I often find this is useful for containing logic that modifies configuration that only needs to be run if a
certain condition is met.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType">
<em class="property">class </em><code class="descclassname">CiscoAutomationFramework.ThreadLib.</code><code class="descname">SSHSplitDeviceType</code><span class="sig-paren">(</span><em>ip</em>, <em>username</em>, <em>password</em>, <em>enable_password=None</em>, <em>perform_secondary_action=False</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a script by inheriting from this object if you are running the same script against both
Nexus and IOS devices but the command are different on each platform or the sequence is different.
Out of the box it will run the functions prepended with ios on ios and iosxe devices and functions
prepended with nexus on nxos devices. Because it is implied that this script will be run against a mix
of nexus and ios you must define the functions regardless if they will be used or not when inheriting from
this object</p>
<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_during_login">
<code class="descname">ios_during_login</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_during_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Every time this object runs against a device that is detected to be NOT Nexus this method
will be run. Override this method and add logic that needs to be run every time your object runs against a
device.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type</p>
<p>I find I often add logic here that gathers data and does not modify configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_post_secondary_action">
<code class="descname">ios_post_secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_post_secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True and AFTER secondary_action has completed
and the device is detected to be NOT Nexus.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type.</p>
<p>I often find this is useful for containing logic that re gathers data or saves configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_secondary_action">
<code class="descname">ios_secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.ios_secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True and the device is detected as not Nexus.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type</p>
<p>I often find this is useful for containing logic that modifies configuration that only needs to be run if a
certain condition is met.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_during_login">
<code class="descname">nexus_during_login</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_during_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Every time this object runs against a device that is detected to be running Nexus this method
will be run. Override this method and add logic that needs to be run every time your object runs against a
device.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type</p>
<p>I find I often add logic here that gathers data and does not modify configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_post_secondary_action">
<code class="descname">nexus_post_secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_post_secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True and AFTER secondary_action has completed
and the device is detected to be Nexus.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type.</p>
<p>I often find this is useful for containing logic that re gathers data or saves configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_secondary_action">
<code class="descname">nexus_secondary_action</code><span class="sig-paren">(</span><em>ssh</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType.nexus_secondary_action" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will run only if perform_secondary_action is set to True and the device is detected Nexus.</p>
<p>Must be overridden when inheriting from this object regardless if your script will run against this device
type.</p>
<p>I often find this is useful for containing logic that modifies configuration that only needs to be run if a
certain condition is met.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ssh</strong> (<a class="reference internal" href="interact.html#CiscoAutomationFramework.FirmwareBase.CiscoFirmware" title="CiscoAutomationFramework.FirmwareBase.CiscoFirmware"><em>CiscoFirmware</em></a>) – SSH object is provided to this method for interacting with the end device</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-CiscoAutomationFramework.ThreadLib"></span><dl class="function">
<dt id="CiscoAutomationFramework.ThreadLib.start_threads">
<code class="descclassname">CiscoAutomationFramework.ThreadLib.</code><code class="descname">start_threads</code><span class="sig-paren">(</span><em>object</em>, <em>ips</em>, <em>username</em>, <em>password</em>, <em>enable_password=None</em>, <em>perform_secondary_action=False</em>, <em>wait_for_threads=False</em><span class="sig-paren">)</span><a class="headerlink" href="#CiscoAutomationFramework.ThreadLib.start_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function is a quick and easy way to start your threads. Gives you an option for waiting for threads
to complete also.
It will return the thread objects from the function for further processing by the main thread.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>object</strong> (<em>[</em><a class="reference internal" href="#CiscoAutomationFramework.ThreadLib.SSH" title="CiscoAutomationFramework.ThreadLib.SSH"><em>SSH</em></a><em>, </em><a class="reference internal" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType" title="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType"><em>SSHSplitDeviceType</em></a><em>]</em>) – Object you have written to perform your task. Must be inherted from SSH or SSHSplitDeviceType</li>
<li><strong>ips</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of IP addresses or hostnames to run your worker object against</li>
<li><strong>username</strong> (<em>str</em>) – Username to login with</li>
<li><strong>password</strong> (<em>str</em>) – Password for user</li>
<li><strong>enable_password</strong> (<em>str</em>) – Enable password if user does not have rights to privilege exec mode without enable password</li>
<li><strong>perform_secondary_action</strong> (<em>bool</em>) – True if you want to run the secondary_action method against device</li>
<li><strong>wait_for_threads</strong> (<em>bool</em>) – Wait for all threads to complete before returning</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">List of threads either running or completed depending on if wait_for_threads is True/False</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list[<a class="reference internal" href="#CiscoAutomationFramework.ThreadLib.SSH" title="CiscoAutomationFramework.ThreadLib.SSH">SSH</a>, <a class="reference internal" href="#CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType" title="CiscoAutomationFramework.ThreadLib.SSHSplitDeviceType">SSHSplitDeviceType</a>, <a class="reference internal" href="parsers.html#CiscoAutomationFramework.Parsers.InterfaceStatusParser.LineParser.type" title="CiscoAutomationFramework.Parsers.InterfaceStatusParser.LineParser.type">type</a>(object)]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="example-scripts">
<h2>Example Scripts<a class="headerlink" href="#example-scripts" title="Permalink to this headline">¶</a></h2>
<p>Below is an example script that will run concurrently across multiple network devices:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">CiscoAutomationFramework.ThreadLib</span> <span class="kn">import</span> <span class="n">SSH</span><span class="p">,</span> <span class="n">start_threads</span>


<span class="k">class</span> <span class="nc">MyDevice</span><span class="p">(</span><span class="n">SSH</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interfaces_connected</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">during_login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ssh</span><span class="p">):</span>
        <span class="c1"># Code here will run every time no matter what</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">ssh</span><span class="o">.</span><span class="n">send_command_get_output</span><span class="p">(</span><span class="s1">&#39;show interface status&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;connected&#39;</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;notconn&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">interfaces_connected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">secondary_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ssh</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If there is some secondary action needed to be performed, code it here</span>
<span class="sd">        If there is nothing you need to do you DO NOT need to define this method</span>

<span class="sd">        To execute this, when starting threads via the start_threads method set</span>
<span class="sd">        perform_secondary_action=True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">post_secondary_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ssh</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If you need to something post the secondary action taking place, code it here.</span>
<span class="sd">        an example would be re gathering data or saving config</span>

<span class="sd">        If there is nothing you need to do you DO NOT need to define this method</span>

<span class="sd">        To execute this, when starting threads via the start_threads method set</span>
<span class="sd">        perform_secondary_action=True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;myusername&#39;</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;mypassword&#39;</span>

    <span class="c1"># replace with IP addresses of network devices on your network</span>
    <span class="n">ips</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;192.168.1.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.4.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.5.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.6.1&#39;</span><span class="p">]</span>
    <span class="n">threads</span> <span class="o">=</span> <span class="n">start_threads</span><span class="p">(</span><span class="n">MyDevice</span><span class="p">,</span> <span class="n">ips</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">wait_for_threads</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">interfaces_connected</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="parsers.html" class="btn btn-neutral float-right" title="Command Output Parsers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="interact.html" class="btn btn-neutral" title="Interacting with a Network Device" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Kyle Kowalczyk.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>